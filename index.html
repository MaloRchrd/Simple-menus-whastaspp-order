<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Menu Restaurant</title>
<style>
  body {
    font-family: Arial, sans-serif;
    padding: 20px;
    background: #f8f8f8;
  }
  h1 {
    text-align: center;
  }
  .menu {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    justify-content: center;
  }
  .card {
    background: #fff;
    border-radius: 8px;
    width: 200px;
    padding: 15px;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    text-align: center;
  }
  .card img {
    width: 100%;
    border-radius: 8px;
  }
  .card h3 {
    margin: 10px 0 5px;
  }
  .card p {
    margin: 5px 0;
  }
  .card input[type="number"] {
    width: 50px;
    padding: 5px;
    margin-top: 5px;
  }
  .cart {
    margin-top: 30px;
    background: #fff;
    padding: 15px;
    border-radius: 8px;
    max-width: 500px;
    margin-left: auto;
    margin-right: auto;
  }
  .cart h2 {
    margin-top: 0;
  }
  .whatsapp-btn {
    margin-top: 15px;
    padding: 10px 20px;
    background: #25D366;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    width: 100%;
    font-size: 16px;
  }
  .whatsapp-btn:hover {
    background: #1ebe57;
  }
  label {
    display: block;
    margin-top: 10px;
    margin-bottom: 5px;
  }
  #delivery-time {
    width: 100%;
    padding: 8px;
    font-size: 14px;
    margin-bottom: 10px;
  }
  .asap-container {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 10px;
  }
</style>
</head>
<body>

<h1>Menu</h1>

<div class="menu">
  <div class="card" data-name="Pizza Margherita" data-price="8.5">
    <img src="https://via.placeholder.com/200x150.png?text=Pizza" alt="Pizza Margherita">
    <h3>Pizza Margherita</h3>
    <p>Prix: 8,50 €</p>
    <input type="number" min="0" value="0">
  </div>
  <div class="card" data-name="Burger Classique" data-price="6.5">
    <img src="https://via.placeholder.com/200x150.png?text=Burger" alt="Burger Classique">
    <h3>Burger Classique</h3>
    <p>Prix: 6,50 €</p>
    <input type="number" min="0" value="0">
  </div>
  <div class="card" data-name="Salade César" data-price="7.5">
    <img src="https://via.placeholder.com/200x150.png?text=Salade" alt="Salade César">
    <h3>Salade César</h3>
    <p>Prix: 7,50 €</p>
    <input type="number" min="0" value="0">
  </div>
</div>

<div class="cart">
  <h2>Récapitulatif</h2>
  <div id="cart-items">Aucun article sélectionné</div>
  <p id="total"></p>

  <!-- Sélecteur date/heure + Dès que possible -->
  <div class="asap-container">
    <input type="checkbox" id="asap">
    <label for="asap">Dès que possible</label>
  </div>
  <label for="delivery-time">Date et heure souhaitées :</label>
  <input type="datetime-local" id="delivery-time">

  <button class="whatsapp-btn" id="sendWhatsApp">Envoyer par WhatsApp</button>
</div>

<script>
const cards = document.querySelectorAll('.card');
const cartItemsDiv = document.getElementById('cart-items');
const totalDiv = document.getElementById('total');
const whatsappBtn = document.getElementById('sendWhatsApp');
const deliveryInput = document.getElementById('delivery-time');
const asapCheckbox = document.getElementById('asap');

function updateCart() {
  let cartText = '';
  let total = 0;
  cards.forEach(card => {
    const quantity = parseInt(card.querySelector('input').value);
    const name = card.dataset.name;
    const price = parseFloat(card.dataset.price);
    if (quantity > 0) {
      cartText += `${name} x${quantity} - ${(price*quantity).toFixed(2)} €\n`;
      total += price * quantity;
    }
  });
  cartItemsDiv.textContent = cartText || 'Aucun article sélectionné';
  totalDiv.textContent = total ? `Total: ${total.toFixed(2)} €` : '';
}

// Met à jour le panier à chaque changement de quantité
cards.forEach(card => {
  card.querySelector('input').addEventListener('input', updateCart);
});

// Désactive ou active le sélecteur si "Dès que possible" est coché
asapCheckbox.addEventListener('change', () => {
  deliveryInput.disabled = asapCheckbox.checked;
});

function formatDateReadable(datetimeStr) {
  const date = new Date(datetimeStr);
  if (isNaN(date)) return '';
  const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit' };
  return date.toLocaleDateString('fr-FR', options);
}

// Bouton WhatsApp
whatsappBtn.addEventListener('click', () => {
  let message = 'Commande :\n';
  let total = 0;

  cards.forEach(card => {
    const quantity = parseInt(card.querySelector('input').value);
    const name = card.dataset.name;
    const price = parseFloat(card.dataset.price);
    if (quantity > 0) {
      message += `${name} x${quantity} - ${(price*quantity).toFixed(2)} €\n`;
      total += price * quantity;
    }
  });

  if (total === 0) {
    alert('Veuillez sélectionner au moins un article.');
    return;
  }

  message += `Total: ${total.toFixed(2)} €\n`;

  // Heure souhaitée
  if (asapCheckbox.checked) {
    message += `Heure souhaitée : Dès que possible`;
  } else if (deliveryInput.value) {
    message += `Heure souhaitée : ${formatDateReadable(deliveryInput.value)}`;
  }

  const phoneNumber = '33612345678'; // Remplace par ton numéro WhatsApp (sans le +)
  const url = `https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`;
  window.open(url, '_blank');
});

// Initial update
updateCart();
</script>

</body>
</html>
